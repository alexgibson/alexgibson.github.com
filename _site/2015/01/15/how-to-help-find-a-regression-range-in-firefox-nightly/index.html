<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
  <meta charset="utf-8" />
  <title>How to help find a regression range in Firefox Nightly &ndash; Alex Gibson</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Site meta -->
  <meta name="description" content="A technical run through of CSS and SVG animations on the new Firefox desktop web pages" />
  <meta name="author" content="Alex Gibson" />

  <!-- Prefetch DNS for external assets -->
  <link rel="dns-prefetch" href="//www.google-analytics.com" />
  <link rel="dns-prefetch" href="//cdn.api.twitter.com" />

  <script src="/js/site.js"></script>

  <link rel="stylesheet" href="/css/styles.css" />
  <link rel="alternate" type="application/rss+xml" title="Alex Gibson" href="/feed/" />
  <link rel="canonical" href="http://alxgbsn.co.uk/2015/01/15/how-to-help-find-a-regression-range-in-firefox-nightly" />

  <!--[if lt IE 9]>
    <script src="/js/html5shiv.js"></script>
  <![endif]-->

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/iOS-144.png" />
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/iOS-114.png" />
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/iOS-72.png" />
  <link rel="apple-touch-icon-precomposed" href="/images/iOS-57.png" />
  <link rel="shortcut icon" href="/images/iOS-57.png" />

  <!-- iOS icon app title -->
  <meta name="apple-mobile-web-app-title" content="Alex Gibson" />

  <!-- Google Analytics -->
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-33263279-1', 'auto');  // Replace with your property ID.
  ga('send', 'pageview');

  </script>
  <!-- End Google Analytics -->
</head>
<body>
  <main role="main">
    <header role="banner">
      <nav role="navigation">
  <ul>
    <li><a href="/">Home</a></li>
    <li><a href="/about/">About</a></li>
    <li><a href="/projects/">Projects</a></li>
    <li><a href="/contact/">Contact</a></li>
  </ul>
</nav>

      <h1>How to help find a regression range in Firefox Nightly</h1>
    </header>
    <section class="post">
  <time pubdate datetime="2015-01-15 00:00:00 +0000">Published January 15 2015</time>
  <p>I recently spotted a <a href="https://bug1083079.bugzilla.mozilla.org/attachment.cgi?id=8506255">visual glitch</a> in a CSS animation that was only happening in Firefox Nightly. I was pretty confident the animation played fine just a couple of weeks ago, so after some debugging and ruling out any obvious wrong-doing in the code, I was pretty confident that a recent change in Firefox must have somehow caused a regression. Not knowing quite what else to do, I decided to <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1083079">file a bug</a> to see if anyone else could figure out what was going wrong.</p>

<p>After some initial discussion it turned out the animation was only broken in Firefox on OSX, so definitely a bug! It could have been caused by any number of code changes in the previous few weeks and could not be reproduced on other platforms. So how could I go about helping to find the cause of the regression?</p>

<p>It was then someone pointed me to a tool I hadn't heard of before, called <a href="http://mozilla.github.io/mozregression/">mozregression</a>. It's an interactive regression range finder for Mozilla nightly and inbound builds. Once installed, all you need to do is pass in a last known "good date" together with a known "bad date" and a URL to test. The tool then automates downloading and running different nightly builds against the affected URL.</p>

<pre><code>mozregression --good=2014-10-01 --bad=2014-10-02 -a "https://example.com"
</code></pre>

<p>After each run, mozregression asks you if the build is "good" or "bad" and then continues to narrow down the regression range until it finds when the bug was introduced. The process takes a while to run, but in the end it then spits out a <a href="https://hg.mozilla.org/integration/mozilla-inbound/pushloghtml?fromchange=33a3fd4d1970&amp;tochange=28519d825a23">pushlog like this</a>.</p>

<p>This helped to narrow down the cause of the regression considerably, and together with a <a href="https://bug1083079.bugzilla.mozilla.org/attachment.cgi?id=8516184">reduced test case</a> we we're then able to work out which commit was the cause.</p>

<p>The resulting patch also turned out to fix another bug that was effecting <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1105762">Leaflet.js maps</a> in Firefox. Result!</p>

</section>

    <footer role="contentinfo">

    <form role="search" class="search" action="http://google.com/search" method="get" title="Search this site">
      <label for="q">Search</label>
      <input type="hidden" name="q" value="site:alxgbsn.co.uk" />
      <input class="search" type="search" name="q" id="q" placeholder="Search this site&hellip;" />
      <button type="submit">Search</button>
    </form>

    <ul class="social">
        <li class="rss"><a href="/feed/" title="RSS feed">Subscribe</a></li>
        <li class="twitter"><a href="https://twitter.com/intent/user?screen_name=alex_gibson">Follow me on Twitter</a></li>
    </ul>

</footer>

  </main>
</body>
</html>

<!DOCTYPE html><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>How to help find a regression range in Firefox Nightly – Alex Gibson</title><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Using mozregression track down the cause of a regression in Firefox"><meta name="author" content="Alex Gibson"><meta name="generator" content="Jekyll"><link rel="canonical" href="https://alxgbsn.co.uk/2015/01/15/how-to-help-find-a-regression-range-in-firefox-nightly/"><link rel="stylesheet" type="text/css" href="/assets/styles-212ef2f8be1924e202ad71a317907e4157ec925edbd0a8acd97f048b9e7858e6.css"><link rel="alternate" type="application/rss+xml" title="Alex Gibson" href="/feed/"><link rel="manifest" href="/manifest.json"><!--[if lt IE 9]>
    <script type="text/javascript" src="/assets/lib/html5shiv-6e9566e51098627c2824e546909ee18725d233fc9cdd81910819e7e108cf36c0.js"></script>
  <![endif]--><meta name="apple-mobile-web-app-title" content="Alex Gibson"><meta name="theme-color" content="#ecebe6"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/assets/avatar-180-b1f192dbbe4ceec9c13c327fb0908af5ddbf621002116885f0cc2e8d8b6787c8.jpg"><link rel="icon" type="image/png" sizes="196x196" href="/assets/avatar-196-a65772ff09fa529d865e4f60735ded2bfb50711bafb1bd79cb2111d7c4ec461c.jpg"><link href="/assets/favicon-28523dd6d2b5917829586fe5248f9a408486e09f98117add94210f56aa7ead33.ico" rel="shortcut icon"></head><body><main role="main"><div class="masthead"><nav role="navigation"><ul><li><a href="/">Home</a></li><li><a href="/about/">About</a></li><li><a href="/contact/">Contact</a></li></ul></nav><div class="theme-selector hidden"><form class="theme-form" method="get"><input type="radio" id="t-light" name="theme" value="t-light"> <label for="t-light" title="Light theme">Light</label> <input type="radio" id="t-dark" name="theme" value="t-dark"> <label for="t-dark" title="Dark theme">Dark</label></form></div></div><article><header role="banner"><h1>How to help find a regression range in Firefox Nightly</h1></header><section class="post"><p class="meta"><time datetime="2015-01-15">January 15 2015</time> 2 min read.</p><p>I recently spotted a <a href="https://bug1083079.bugzilla.mozilla.org/attachment.cgi?id=8506255">visual glitch</a> in a CSS animation that was only happening in Firefox Nightly. I was pretty confident the animation played fine just a couple of weeks ago, so after some debugging and ruling out any obvious wrong-doing in the code, I was pretty confident that a recent change in Firefox must have somehow caused a regression. Not knowing quite what else to do, I decided to <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1083079">file a bug</a> to see if anyone else could figure out what was going wrong.</p><p>After some initial discussion it turned out the animation was only broken in Firefox on OSX, so definitely a bug! It could have been caused by any number of code changes in the previous few weeks and could not be reproduced on other platforms. So how could I go about helping to find the cause of the regression?</p><p>It was then someone pointed me to a tool I hadn’t heard of before, called <a href="http://mozilla.github.io/mozregression/">mozregression</a>. It’s an interactive regression range finder for Mozilla nightly and inbound builds. Once installed, all you need to do is pass in a last known “good date” together with a known “bad date” and a URL to test. The tool then automates downloading and running different nightly builds against the affected URL.</p><div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mozregression --good=2014-10-01 --bad=2014-10-02 -a "https://example.com"
</code></pre></div></div><p>After each run, mozregression asks you if the build is “good” or “bad” and then continues to narrow down the regression range until it finds when the bug was introduced. The process takes a while to run, but in the end it then spits out a <a href="https://hg.mozilla.org/integration/mozilla-inbound/pushloghtml?fromchange=33a3fd4d1970&amp;tochange=28519d825a23">pushlog like this</a>.</p><p>This helped to narrow down the cause of the regression considerably, and together with a <a href="https://bug1083079.bugzilla.mozilla.org/attachment.cgi?id=8516184">reduced test case</a> we we’re then able to work out which commit was the cause.</p><p>The resulting patch also turned out to fix another bug that was effecting <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1105762">Leaflet.js maps</a> in Firefox. Result!</p></section></article><footer role="contentinfo"><form role="search" class="search" action="https://duckduckgo.com/" method="get" title="Search this site"><label for="q">Search</label> <input type="hidden" name="sites" value="alxgbsn.co.uk"> <input class="search" type="search" name="q" id="q" placeholder="Search this site"> <button type="submit">Go</button></form><ul><li><a href="/feed/index.xml" title="RSS feed">Subscribe (RSS)</a></li></ul></footer></main><script type="module" src="/assets/main-058dcf1c5b2815b57e44c7ed387fe85f37926b180e1c41b60110ce86ad4e290d.js"></script></body></html>